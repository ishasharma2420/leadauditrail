<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Lab Intelligence</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,400;12..96,500;12..96,600;12..96,700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #f4f6f9;
    --card-bg: #ffffff;
    --text-primary: #0f1728;
    --text-secondary: #5a6478;
    --text-muted: #8c95a6;
    --border: #e4e8f0;
    --shadow: 0 1px 4px rgba(15,23,40,0.06), 0 4px 16px rgba(15,23,40,0.04);
    --shadow-hover: 0 2px 8px rgba(15,23,40,0.08), 0 8px 24px rgba(15,23,40,0.08);
    --radius: 12px;

    --flash-color: #2563eb;
    --flash-light: #eff6ff;
    --flash-mid: #bfdbfe;

    --sherlock-color: #7c3aed;
    --sherlock-light: #f5f3ff;
    --sherlock-mid: #ddd6fe;

    --hawke-color: #059669;
    --hawke-light: #ecfdf5;
    --hawke-mid: #a7f3d0;

    --invorto-color: #d97706;
    --invorto-light: #fffbeb;
    --invorto-mid: #fde68a;

    --sev-critical: #dc2626;
    --sev-high: #ea580c;
    --sev-medium: #d97706;
    --sev-low: #16a34a;
  }

  body {
    font-family: 'Inter', sans-serif;
    background: var(--bg);
    color: var(--text-primary);
    padding: 16px;
    min-height: 100vh;
    font-size: 13px;
    line-height: 1.5;
  }

  /* Header */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
    padding-bottom: 14px;
    border-bottom: 1px solid var(--border);
  }
  .header-title {
    font-family: 'Bricolage Grotesque', sans-serif;
    font-size: 15px;
    font-weight: 700;
    color: var(--text-primary);
    letter-spacing: -0.2px;
  }
  .header-sub {
    font-size: 11px;
    color: var(--text-muted);
    margin-top: 1px;
  }
  .header-badge {
    font-size: 10px;
    font-weight: 600;
    padding: 3px 8px;
    background: #0f1728;
    color: #fff;
    border-radius: 20px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }

  /* Card */
  .card {
    background: var(--card-bg);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    margin-bottom: 12px;
    overflow: hidden;
    border: 1px solid var(--border);
    animation: cardIn 0.4s ease both;
    transition: box-shadow 0.2s;
  }
  .card:hover { box-shadow: var(--shadow-hover); }

  @keyframes cardIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .card:nth-child(1) { animation-delay: 0.05s; }
  .card:nth-child(2) { animation-delay: 0.1s; }
  .card:nth-child(3) { animation-delay: 0.15s; }
  .card:nth-child(4) { animation-delay: 0.2s; }

  .card-accent {
    height: 3px;
    width: 100%;
  }
  .flash .card-accent { background: linear-gradient(90deg, var(--flash-color), #60a5fa); }
  .sherlock .card-accent { background: linear-gradient(90deg, var(--sherlock-color), #a78bfa); }
  .hawke .card-accent { background: linear-gradient(90deg, var(--hawke-color), #34d399); }
  .invorto .card-accent { background: linear-gradient(90deg, var(--invorto-color), #fbbf24); }

  .card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px 10px;
    border-bottom: 1px solid var(--border);
  }
  .agent-icon {
    width: 30px;
    height: 30px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    flex-shrink: 0;
  }
  .flash .agent-icon { background: var(--flash-light); }
  .sherlock .agent-icon { background: var(--sherlock-light); }
  .hawke .agent-icon { background: var(--hawke-light); }
  .invorto .agent-icon { background: var(--invorto-light); }

  .agent-name {
    font-family: 'Bricolage Grotesque', sans-serif;
    font-size: 13px;
    font-weight: 700;
    color: var(--text-primary);
  }
  .agent-tagline {
    font-size: 10px;
    color: var(--text-muted);
    margin-top: 0px;
  }
  .agent-status {
    margin-left: auto;
    font-size: 10px;
    font-weight: 600;
    padding: 2px 8px;
    border-radius: 10px;
    text-transform: uppercase;
    letter-spacing: 0.3px;
  }
  .status-active {
    background: #dcfce7;
    color: #15803d;
  }

  .card-body { padding: 14px 16px 16px; }

  /* Score Ring */
  .score-row {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 14px;
  }
  .score-ring-wrap {
    position: relative;
    width: 64px;
    height: 64px;
    flex-shrink: 0;
  }
  .score-ring-wrap svg {
    transform: rotate(-90deg);
  }
  .score-ring-bg {
    fill: none;
    stroke: var(--border);
    stroke-width: 5;
  }
  .score-ring-fill {
    fill: none;
    stroke-width: 5;
    stroke-linecap: round;
    transition: stroke-dashoffset 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .score-value {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-family: 'Bricolage Grotesque', sans-serif;
    font-size: 18px;
    font-weight: 700;
    color: var(--text-primary);
    line-height: 1;
  }
  .score-value small {
    font-size: 8px;
    font-weight: 500;
    color: var(--text-muted);
    margin-top: 1px;
    font-family: 'Inter', sans-serif;
  }
  .score-meta { flex: 1; }
  .readiness-label {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 3px;
  }
  .readiness-bucket {
    font-family: 'Bricolage Grotesque', sans-serif;
    font-size: 18px;
    font-weight: 700;
    line-height: 1.1;
  }
  .bucket-high { color: #16a34a; }
  .bucket-medium { color: #d97706; }
  .bucket-low { color: #dc2626; }

  /* Field rows */
  .field {
    margin-top: 10px;
  }
  .field-label {
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--text-muted);
    margin-bottom: 4px;
  }
  .field-value {
    font-size: 13px;
    color: var(--text-primary);
    font-weight: 500;
  }
  .reasoning-block {
    background: var(--bg);
    border-left: 3px solid var(--border);
    border-radius: 0 6px 6px 0;
    padding: 8px 10px;
    font-size: 12px;
    color: var(--text-secondary);
    line-height: 1.6;
    margin-top: 4px;
  }
  .flash .reasoning-block { border-left-color: var(--flash-mid); background: var(--flash-light); }
  .sherlock .reasoning-block { border-left-color: var(--sherlock-mid); background: var(--sherlock-light); }
  .hawke .reasoning-block { border-left-color: var(--hawke-mid); background: var(--hawke-light); }
  .invorto .reasoning-block { border-left-color: var(--invorto-mid); background: var(--invorto-light); }

  /* Chips */
  .chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 11px;
    font-weight: 600;
  }
  .chip-anomaly {
    background: #f1f5f9;
    color: var(--text-secondary);
    border: 1px solid var(--border);
  }

  .severity-badge {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 3px 10px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.4px;
  }
  .sev-dot {
    width: 6px; height: 6px;
    border-radius: 50%;
    display: inline-block;
  }
  .sev-critical { background: #fee2e2; color: var(--sev-critical); }
  .sev-critical .sev-dot { background: var(--sev-critical); }
  .sev-high { background: #ffedd5; color: var(--sev-high); }
  .sev-high .sev-dot { background: var(--sev-high); }
  .sev-medium { background: #fef3c7; color: var(--sev-medium); }
  .sev-medium .sev-dot { background: var(--sev-medium); }
  .sev-low { background: #dcfce7; color: var(--sev-low); }
  .sev-low .sev-dot { background: var(--sev-low); }

  /* Confidence bar */
  .conf-wrap { margin-top: 10px; }
  .conf-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 5px;
  }
  .conf-bar-bg {
    height: 6px;
    background: var(--border);
    border-radius: 3px;
    overflow: hidden;
  }
  .conf-bar-fill {
    height: 100%;
    border-radius: 3px;
    background: linear-gradient(90deg, var(--hawke-color), #34d399);
    width: 0%;
    transition: width 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  }
  .conf-pct {
    font-family: 'Bricolage Grotesque', sans-serif;
    font-size: 15px;
    font-weight: 700;
    color: var(--hawke-color);
  }

  /* Two-col chips row */
  .two-col { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
  .two-col > * { flex: 1 1 calc(50% - 5px); min-width: 120px; }

  /* Divider */
  .divider { height: 1px; background: var(--border); margin: 12px 0; }

  /* QA Risk */
  .qa-risk-row { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; margin-bottom: 10px; }
  .risk-badge {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 3px 10px; border-radius: 6px;
    font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.3px;
  }
  .risk-high { background: #fee2e2; color: #dc2626; }
  .risk-medium { background: #fef3c7; color: #b45309; }
  .risk-low { background: #dcfce7; color: #15803d; }

  /* Findings list */
  .findings-list { list-style: none; }
  .findings-list li {
    font-size: 12px;
    color: var(--text-secondary);
    padding: 3px 0;
    padding-left: 14px;
    position: relative;
    line-height: 1.5;
  }
  .findings-list li::before {
    content: '';
    position: absolute;
    left: 0;
    top: 8px;
    width: 5px; height: 5px;
    border-radius: 50%;
    background: var(--sherlock-mid);
  }

  /* Timestamp */
  .timestamp {
    font-size: 10px;
    color: var(--text-muted);
    margin-top: 8px;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  /* Loading */
  #loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 60px 20px;
    gap: 16px;
  }
  .spinner {
    width: 36px; height: 36px;
    border: 3px solid var(--border);
    border-top-color: #2563eb;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .loading-text {
    font-size: 12px;
    color: var(--text-muted);
    font-weight: 500;
  }

  /* Error */
  #error {
    display: none;
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
  }

  /* Empty */
  .empty-state {
    text-align: center;
    padding: 50px 20px;
    display: none;
  }
  .empty-state .empty-icon { font-size: 36px; margin-bottom: 12px; }
  .empty-state h3 {
    font-family: 'Bricolage Grotesque', sans-serif;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 6px;
  }
  .empty-state p {
    font-size: 12px;
    color: var(--text-muted);
    max-width: 240px;
    margin: 0 auto;
    line-height: 1.6;
  }
</style>
</head>
<body>

<div class="header">
  <div>
    <div class="header-title">AI Lab Intelligence</div>
    <div class="header-sub" id="lastUpdated">Loading...</div>
  </div>
  <span class="header-badge">Active</span>
</div>

<div id="loading">
  <div class="spinner"></div>
  <div class="loading-text">Fetching agent analysis‚Ä¶</div>
</div>

<div id="error">
  <div style="font-size:28px;margin-bottom:10px;">‚ö†Ô∏è</div>
  <div style="font-size:13px;font-weight:600;color:#0f1728;margin-bottom:6px;">Could not load intelligence data</div>
  <div style="font-size:12px;">Check the backend connection and try again.</div>
</div>

<div id="content" style="display:none;">
  <div class="empty-state" id="emptyState">
    <div class="empty-icon">üîç</div>
    <h3>No Intelligence Yet</h3>
    <p>The AI agents haven't analysed this lead yet. Check back after the next scheduled run.</p>
  </div>
  <div id="cards"></div>
</div>

<script>
const API_BASE = 'https://lead-intelligence-api.onrender.com/lead-intelligence';

function getParam(name) {
  const u = new URLSearchParams(window.location.search);
  return u.get(name);
}

function isEmpty(val) {
  return !val || val === '' || val === 'null' || val === 'undefined' || val === '-';
}

function fmt(val) {
  return isEmpty(val) ? null : val;
}

function fmtDate(val) {
  if (!val) return null;
  try {
    const d = new Date(val);
    if (isNaN(d)) return val;
    return d.toLocaleString('en-US', { month: 'short', day: 'numeric', year: 'numeric', hour: '2-digit', minute: '2-digit' });
  } catch { return val; }
}

function severityClass(sev) {
  if (!sev) return '';
  const s = sev.toLowerCase();
  if (s === 'critical') return 'sev-critical';
  if (s === 'high') return 'sev-high';
  if (s === 'medium') return 'sev-medium';
  return 'sev-low';
}

function riskClass(risk) {
  if (!risk) return '';
  const r = risk.toLowerCase();
  if (r === 'high') return 'risk-high';
  if (r === 'medium') return 'risk-medium';
  return 'risk-low';
}

function bucketClass(bucket) {
  if (!bucket) return '';
  const b = bucket.toLowerCase();
  if (b === 'high') return 'bucket-high';
  if (b === 'medium') return 'bucket-medium';
  return 'bucket-low';
}

function buildFlash(d) {
  const score = fmt(d.mx_AI_Readiness_Score);
  const bucket = fmt(d.mx_Readiness_Bucket);
  const intent = fmt(d.mx_AI_Detected_Intent);
  const reasoning = fmt(d.mx_AI_Reasoning);

  if (!score && !bucket && !intent && !reasoning) return null;

  const scoreNum = parseInt(score) || 0;
  const r = 26;
  const circ = 2 * Math.PI * r;
  const offset = circ - (scoreNum / 100) * circ;

  const bucketColor = bucket ? (bucket.toLowerCase() === 'high' ? '#16a34a' : bucket.toLowerCase() === 'medium' ? '#d97706' : '#dc2626') : '#2563eb';

  return `
    <div class="card flash">
      <div class="card-accent"></div>
      <div class="card-header">
        <div class="agent-icon">‚ö°</div>
        <div>
          <div class="agent-name">Agent Flash</div>
          <div class="agent-tagline">60 Seconds to Schedule</div>
        </div>
        <span class="agent-status status-active">Active</span>
      </div>
      <div class="card-body">
        ${score || bucket ? `
        <div class="score-row">
          ${score ? `
          <div class="score-ring-wrap">
            <svg width="64" height="64" viewBox="0 0 64 64">
              <circle class="score-ring-bg" cx="32" cy="32" r="${r}"/>
              <circle class="score-ring-fill" cx="32" cy="32" r="${r}"
                stroke="${bucketColor}"
                stroke-dasharray="${circ}"
                stroke-dashoffset="${circ}"
                data-offset="${offset}"
                id="flashRing"/>
            </svg>
            <div class="score-value">${scoreNum}<small>/100</small></div>
          </div>` : ''}
          ${bucket ? `
          <div class="score-meta">
            <div class="readiness-label">Readiness Score</div>
            <div class="readiness-bucket ${bucketClass(bucket)}">${bucket}</div>
          </div>` : ''}
        </div>` : ''}
        ${intent ? `
        <div class="field">
          <div class="field-label">Detected Intent</div>
          <div class="field-value">${intent}</div>
        </div>` : ''}
        ${reasoning ? `
        <div class="field">
          <div class="field-label">AI Reasoning</div>
          <div class="reasoning-block">${reasoning}</div>
        </div>` : ''}
      </div>
    </div>`;
}

function buildHawke(d) {
  const anomalyType = fmt(d.mx_Latest_Anomaly_Type);
  const severity = fmt(d.mx_Latest_Anomaly_Severity);
  const conf = fmt(d.mx_Latest_Anomaly_Confidence);
  const lastRun = fmt(d.mx_Last_Intelligence_Run);
  const explanation = fmt(d.mx_Latest_Anomaly_Explanation);
  const status = fmt(d.mx_AI_Anomaly_Status);

  if (!anomalyType && !severity && !conf && !explanation) return null;

  const confNum = parseInt(conf) || 0;

  return `
    <div class="card hawke">
      <div class="card-accent"></div>
      <div class="card-header">
        <div class="agent-icon">ü¶Ö</div>
        <div>
          <div class="agent-name">Agent Hawke</div>
          <div class="agent-tagline">Anomaly Detection</div>
        </div>
        <span class="agent-status status-active">Active</span>
      </div>
      <div class="card-body">
        ${anomalyType || severity ? `
        <div class="two-col">
          ${anomalyType ? `
          <div class="field">
            <div class="field-label">Anomaly Type</div>
            <div class="field-value"><span class="chip chip-anomaly">${anomalyType}</span></div>
          </div>` : ''}
          ${severity ? `
          <div class="field">
            <div class="field-label">Severity</div>
            <div class="field-value"><span class="severity-badge ${severityClass(severity)}"><span class="sev-dot"></span>${severity}</span></div>
          </div>` : ''}
        </div>` : ''}
        ${conf ? `
        <div class="conf-wrap">
          <div class="conf-header">
            <div class="field-label">Confidence</div>
            <div class="conf-pct" id="confPct">0%</div>
          </div>
          <div class="conf-bar-bg">
            <div class="conf-bar-fill" data-pct="${confNum}" id="confBar"></div>
          </div>
        </div>` : ''}
        ${explanation ? `
        <div class="field">
          <div class="field-label">Explanation</div>
          <div class="reasoning-block">${explanation}</div>
        </div>` : ''}
        ${lastRun ? `<div class="timestamp">üïê Last run: ${fmtDate(lastRun)}</div>` : ''}
      </div>
    </div>`;
}

function buildSherlock(d) {
  const status = fmt(d.mx_QA_Status);
  const risk = fmt(d.mx_QA_Risk_Level);
  const summary = fmt(d.mx_QA_Summary);
  const findings = fmt(d.mx_QA_Key_Findings);
  const advisory = fmt(d.mx_QA_Advisory_Notes);
  const concerns = fmt(d.mx_QA_Concerns);

  if (!status && !risk && !summary && !findings && !advisory && !concerns) return null;

  const findingsList = findings ? findings.split(/[;|,\n]/).map(f => f.trim()).filter(f => f.length > 2) : [];

  return `
    <div class="card sherlock">
      <div class="card-accent"></div>
      <div class="card-header">
        <div class="agent-icon">üîé</div>
        <div>
          <div class="agent-name">Agent Sherlock</div>
          <div class="agent-tagline">Intake QA Review</div>
        </div>
        <span class="agent-status status-active">Active</span>
      </div>
      <div class="card-body">
        ${status || risk ? `
        <div class="qa-risk-row">
          ${status ? `<span class="chip chip-anomaly">${status}</span>` : ''}
          ${risk ? `<span class="risk-badge ${riskClass(risk)}">${risk} Risk</span>` : ''}
        </div>` : ''}
        ${summary ? `
        <div class="field">
          <div class="field-label">Summary</div>
          <div class="reasoning-block">${summary}</div>
        </div>` : ''}
        ${findingsList.length ? `
        <div class="field">
          <div class="field-label">Key Findings</div>
          <ul class="findings-list">
            ${findingsList.map(f => `<li>${f}</li>`).join('')}
          </ul>
        </div>` : (findings ? `
        <div class="field">
          <div class="field-label">Key Findings</div>
          <div class="reasoning-block">${findings}</div>
        </div>` : '')}
        ${advisory ? `
        <div class="divider"></div>
        <div class="field">
          <div class="field-label">Advisory Notes</div>
          <div class="reasoning-block">${advisory}</div>
        </div>` : ''}
        ${concerns ? `
        <div class="field">
          <div class="field-label">Concerns</div>
          <div class="reasoning-block">${concerns}</div>
        </div>` : ''}
      </div>
    </div>`;
}

function buildInvorto(d) {
  const hesitation = fmt(d.mx_Primary_Hesitation);
  const motivation = fmt(d.mx_Motivation_Trigger);
  const decisionOwner = fmt(d.mx_Decision_Owner);
  const timeline = fmt(d.mx_Enrollment_Timeline_Voice_Call);

  if (!hesitation && !motivation && !decisionOwner && !timeline) return null;

  return `
    <div class="card invorto">
      <div class="card-accent"></div>
      <div class="card-header">
        <div class="agent-icon">üéôÔ∏è</div>
        <div>
          <div class="agent-name">Invorto Voice</div>
          <div class="agent-tagline">Voice Call Intelligence</div>
        </div>
        <span class="agent-status status-active">Active</span>
      </div>
      <div class="card-body">
        ${hesitation ? `
        <div class="field">
          <div class="field-label">Primary Hesitation</div>
          <div class="reasoning-block">${hesitation}</div>
        </div>` : ''}
        ${motivation ? `
        <div class="field">
          <div class="field-label">Motivation Trigger</div>
          <div class="field-value">${motivation}</div>
        </div>` : ''}
        ${decisionOwner || timeline ? `
        <div class="two-col" style="margin-top:10px;">
          ${decisionOwner ? `
          <div class="field">
            <div class="field-label">Decision Owner</div>
            <div class="field-value">${decisionOwner}</div>
          </div>` : ''}
          ${timeline ? `
          <div class="field">
            <div class="field-label">Enrollment Timeline</div>
            <div class="field-value">${timeline}</div>
          </div>` : ''}
        </div>` : ''}
      </div>
    </div>`;
}

function animateRing() {
  const ring = document.getElementById('flashRing');
  if (ring) {
    const offset = parseFloat(ring.dataset.offset);
    setTimeout(() => { ring.style.strokeDashoffset = offset; }, 100);
  }
}

function animateBar() {
  const bar = document.getElementById('confBar');
  const pct = document.getElementById('confPct');
  if (bar) {
    const target = parseFloat(bar.dataset.pct);
    setTimeout(() => {
      bar.style.width = target + '%';
      if (pct) pct.textContent = target + '%';
    }, 200);
  }
}

async function loadData() {
  const pid = getParam('pid');
  const loading = document.getElementById('loading');
  const content = document.getElementById('content');
  const errorEl = document.getElementById('error');
  const cards = document.getElementById('cards');
  const emptyState = document.getElementById('emptyState');
  const lastUpdated = document.getElementById('lastUpdated');

  if (!pid) {
    loading.style.display = 'none';
    errorEl.style.display = 'block';
    errorEl.querySelector('div:last-child').textContent = 'No lead ID provided.';
    return;
  }

  try {
    const res = await fetch(`${API_BASE}?pid=${encodeURIComponent(pid)}`);
    if (!res.ok) throw new Error('API error');
    const data = await res.json();

    loading.style.display = 'none';
    content.style.display = 'block';
    lastUpdated.textContent = 'Updated ' + new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });

    const flashHTML = buildFlash(data);
    const hawkeHTML = buildHawke(data);
    const sherlockHTML = buildSherlock(data);
    const invortoHTML = buildInvorto(data);

    const allCards = [flashHTML, hawkeHTML, sherlockHTML, invortoHTML].filter(Boolean);

    if (allCards.length === 0) {
      emptyState.style.display = 'block';
    } else {
      cards.innerHTML = allCards.join('');
      animateRing();
      animateBar();
    }
  } catch (e) {
    loading.style.display = 'none';
    errorEl.style.display = 'block';
  }
}

loadData();
</script>
</body>
</html>
